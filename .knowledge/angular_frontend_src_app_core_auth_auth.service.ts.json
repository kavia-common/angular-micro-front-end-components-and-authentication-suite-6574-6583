{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service 'AuthService' that manages authentication states, login, MFA, password reset, and user profile data within the application.", "external_files": ["../config/environment", "./auth.models"], "external_methods": ["EnvironmentService.isMock()"], "published": ["AuthService"], "classes": [{"name": "AuthService", "description": "Provides authentication flows and manages user state across the app, including login, MFA verification, password reset, and logout."}], "methods": [{"name": "isAuthenticated$", "description": "Returns an observable reflecting the user's authentication status."}, {"name": "profile", "description": "Returns an observable with the user's profile information."}, {"name": "login", "description": "Handles user login, including mock or real implementation; manages MFA requirement."}, {"name": "requestMfa", "description": "Requests an MFA token; simulated for mock environment."}, {"name": "verifyMfa", "description": "Verifies MFA code; updates authentication state upon success."}, {"name": "requestPasswordReset", "description": "Initiates password reset process."}, {"name": "resetPassword", "description": "Confirms password reset with provided payload."}, {"name": "logout", "description": "Clears authentication state and user profile."}], "calls": ["this.env.isMock()", "of()", "delay()", "map()"], "search-terms": ["auth.service.ts", "MfaVerifyRequest", "PasswordResetRequest", "BehaviorSubject"], "state": 2, "file_id": 37, "knowledge_revision": 79, "git_revision": "", "ctags": [{"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^export class AuthService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "accessToken", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^        accessToken: requiresMfa ? undefined : 'mock-access-token'$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "authState$", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^  private authState$ = new BehaviorSubject<boolean>(false);$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "mfaToken", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^        mfaToken: requiresMfa ? 'mock-mfa-token' : undefined,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^      const ok = payload.code === '123456' && (!!this.pendingMfaToken && payload.mfaToken === th/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "requiresMfa", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^      const requiresMfa = payload.email.toLowerCase().includes('mfa');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^      const res: LoginResponse = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "undefined", "path": "/home/kavia/workspace/code-generation/angular-micro-front-end-components-and-authentication-suite-6574-6583/angular_frontend/src/app/core/auth/auth.service.ts", "pattern": "/^        accessToken: requiresMfa ? undefined : 'mock-access-token'$/", "language": "TypeScript", "kind": "constant"}], "hash": "0e3a79f9a98bf6095338b8e6e3bca302", "format-version": 4, "code-base-name": "angular_frontend", "filename": "angular_frontend/src/app/core/auth/auth.service.ts", "fields": [{"name": "private authState$ = new BehaviorSubject<boolean>(false);", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"79": ""}]}